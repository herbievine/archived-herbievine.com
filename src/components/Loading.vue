<template>
    <div class="center" ref="center">
        <div class="container">
            <svg
                version="1.1"
                id="Layer_1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                x="0px"
                y="0px"
                viewBox="0 0 1879.14 310.57"
                width="2000"
                style="enable-background: new 0 0 1879.14 310.57;"
                xml:space="preserve"
            >
                <path
                    class="st0"
                    d="M4,4h35.52l0.24,110.73h0.81c5.65-10.09,9.14-13.04,20.04-19.1c10.49-6.05,28.16-4.85,41.48-4.85
	                c26.24,0,68.22,16.15,68.22,83.55v116.25h-35.52V178.37c0-31.48-11.71-58.12-45.21-58.12c-23.01,0-41.17,16.15-47.63,35.52
	                c-2.02,4.84-2.42,10.09-2.42,16.95v117.86H4V4z"
                />
                <path
                    class="st0"
                    d="M247.8,199.36c0.81,48.03,31.48,67.81,67,67.81c25.43,0,40.77-4.44,54.09-10.09l6.05,25.43
	                c-12.51,5.65-33.91,12.11-64.99,12.11c-60.14,0-96.07-39.56-96.07-98.49c0-58.93,34.71-105.35,91.63-105.35
	                c63.78,0,80.73,56.11,80.73,92.03c0,7.27-0.81,12.92-1.21,16.55H247.8z"
                />
                <path
                    class="st0"
                    d="M351.94,173.93c0.4-22.6-9.28-57.72-49.24-57.72c-35.92,0-51.67,33.1-54.49,57.72H351.94z"
                />
                <path
                    class="st0"
                    d="M430.24,156.17c0-23.01-0.4-42.79-1.61-60.95h31.08l1.83,31.59h1.61c8.88-26.24,29.66-36.03,53.47-36.03
	                c4.04,0,6.86,0.4,10.09,1.21v33.5c-3.63-0.81-7.27-1.21-12.11-1.21c-25.03,0-42.79,18.97-47.63,45.61
	                c-0.81,4.84-1.61,10.49-1.61,16.55v104.14h-35.12V156.17z"
                />
                <path
                    class="st0"
                    d="M562.23,290.59c0.81-13.32,1.61-33.1,1.61-50.46V4h35.12l0.36,112.3h0.81c12.51-21.8,34.76-25.52,66.24-25.52
	                c48.44,0,82.75,40.36,82.34,99.7c0,69.83-44,104.54-87.59,104.54c-28.26,0-51.02,0.83-65.55-25h-1.21l-1.45,20.56H562.23z"
                />
                <path
                    class="st0"
                    d="M598.96,212.28c0,4.44,0.81,8.88,1.61,12.92c6.86,24.62,27.45,41.57,53.28,41.57
	                c37.14,0,59.34-30.27,59.34-75.08c0-39.15-20.18-72.66-58.12-72.66c-24.22,0-46.82,16.55-54.09,43.59
	                c-0.81,4.04-2.02,8.88-2.02,14.53V212.28z"
                />
                <path
                    class="st0"
                    d="M833.07,40.33c0.4,12.11-8.48,21.8-22.6,21.8c-12.51,0-21.39-9.69-21.39-21.8c0-12.51,9.28-22.2,22.2-22.2
	                C824.59,18.13,833.07,27.81,833.07,40.33z"
                />
                <rect
                    x="793.51"
                    y="95.22"
                    class="st0"
                    width="35.52"
                    height="195.36"
                />
                <path
                    class="st0"
                    d="M907.74,199.36c0.81,48.03,31.48,67.81,67,67.81c25.43,0,40.77-4.44,54.09-10.09l6.05,25.43
	                c-12.51,5.65-33.91,12.11-64.99,12.11c-60.14,0-96.07-39.56-96.07-98.49c0-58.93,34.71-105.35,91.63-105.35
	                c63.78,0,80.73,56.11,80.73,92.03c0,7.27-0.81,12.92-1.21,16.55H907.74z"
                />
                <path
                    class="st0"
                    d="M1011.88,173.93c0.4-22.6-9.28-57.72-49.24-57.72c-35.92,0-51.67,33.1-54.49,57.72H1011.88z"
                />
                <path
                    class="st0"
                    d="M1189.48,95.22l38.35,109.79c6.46,17.76,11.71,33.91,15.74,50.05h1.21c4.44-16.15,10.09-32.29,16.55-50.05
	                l37.94-109.79h37.14l-76.69,195.36h-33.91l-74.27-195.36H1189.48z"
                />
                <path
                    class="st0"
                    d="M1409.46,40.33c0.4,12.11-8.48,21.8-22.6,21.8c-12.51,0-21.39-9.69-21.39-21.8c0-12.51,9.28-22.2,22.2-22.2
	                C1400.98,18.13,1409.46,27.81,1409.46,40.33z"
                />
                <rect
                    x="1369.9"
                    y="95.22"
                    class="st0"
                    width="35.52"
                    height="195.36"
                />
                <path
                    class="st0"
                    d="M1464.35,148.1c0-20.18-0.4-36.73-1.61-52.88h31.48l2.55,21.26h0.81c9.69-18.57,31.76-25.7,64.05-25.7
	                c27.04,0,69.02,16.15,69.02,83.15v116.65h-35.52V177.97c0-31.48-11.71-57.72-45.21-57.72c-23.41,0-41.57,16.55-47.63,36.33
	                c-1.61,4.44-2.42,10.49-2.42,16.55v117.46h-35.52V148.1z"
                />
                <path
                    class="st0"
                    d="M1708.15,199.36c0.81,48.03,31.48,67.81,67,67.81c25.43,0,40.77-4.44,54.09-10.09l6.05,25.43
	                c-12.51,5.65-33.91,12.11-64.99,12.11c-60.14,0-96.07-39.56-96.07-98.49c0-58.93,34.71-105.35,91.63-105.35
	                c63.78,0,80.73,56.11,80.73,92.03c0,7.27-0.81,12.92-1.21,16.55H1708.15z"
                />
                <path
                    class="st0"
                    d="M1812.29,173.93c0.4-22.6-9.28-57.72-49.24-57.72c-35.92,0-51.67,33.1-54.49,57.72H1812.29z"
                />
            </svg>
        </div>
    </div>
</template>

<script>
import anime from 'animejs';

export default {
    name: 'Loading',
    mounted() {
        anime({
            targets: '.st0',
            strokeDashoffset: [anime.setDashoffset, 0],
            easing: 'easeInOutQuint',
            duration: 3000,
            delay: (el, i) => i * 150,
            direction: 'alternate',
            loop: false,
            begin: () => {
                const bg = this.$refs.center;
                setTimeout(
                    () => (bg.style.backgroundColor = 'rgba(0, 0, 0, 0)'),
                    4000
                );
            },
            complete: async () => {
                const paths = await document.querySelectorAll('.st0');
                await paths.forEach(path => path.classList.add('finished'));

                let redirect = this.$route.query.url.toString();

                setTimeout(async () => {
                    if (redirect) await this.$router.push({ name: redirect });
                    else await this.$router.push({ name: 'Home' });
                }, 1000);
            },
        });
    },
};
</script>

<style lang="scss">
.center {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #080811;
    position: absolute;
    z-index: 10000;
    transition: 3s;
}

.container {
    display: flex;
    justify-content: center;
    align-items: center;

    & svg {
        width: calc(100% * 0.9);
        max-width: 1000px;
    }
}

.st0 {
    fill: none;
    stroke: #cccccc;
    stroke-miterlimit: 10;
    opacity: 1;
}

@media only screen and (min-width: 1199px) {
    .st0 {
        stroke-width: 2;
    }
}

@media only screen and (max-width: 1200px) {
    .st0 {
        stroke-width: 4;
    }
}

.finished {
    transition: 2s;
    transition-timing-function: ease-out;
    opacity: 0;
}
</style>
